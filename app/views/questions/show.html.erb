<% provide :title %>

<% if signed_in? %>

  <div class="row">

    <%#= render 'list_category' %>
    <%#= render 'list_age_groups' %>

    <%= render 'questions/menu' %>
    <%= render 'questions/search_form' %>

    <div class="span9">

      <h3>Domanda</h3>

      <%= link_to gravatar_for (@question.user), @question.user %>
      <%= link_to @question.user.name, @question.user %>  <br>

      <%# visualizzazione della domanda %>
      <span class="content">
        <p><%= @question.title %></p>
        <p><%= category_name(@question) %>, <%= @question.category_id %> </p>
        <p><%= age_groups_name(@question) %>, <%= @question.age_group_id %></p>
        <p><%= @question.content %></p>
        <span class="timestamp">
          Domanda creata <%= time_ago_in_words(@question.created_at) %> fa
        </span>

        <% if @question.user == current_user %> <%# solo se l'utente che sta guardando la domanda è coui che l'ha inserita ha la possibilità di modificarla o cancellarla %>

          <%= link_to 'Modifica', edit_question_path(@question), role: 'button' %>

          <%= link_to 'Cancella', @question, role: 'button', method: :delete, data: {confirm: 'Sei sicuro?'}%>

        <% else %>
          <%# se l'utente che sta visualizzando la domanda non è colui che l'ha postata ha la possibilità di mettere un "Mi piace" o toglierlo %>
          <%= render 'questions/like_question_form'%>

        <% end %>

        <% if @question.answers.any? %>
            <h3>Risposte: <%= @question.answers.count %></h3>
            <ol class="posts">
              <%= render @answers %>
            </ol>
            <%= will_paginate @answers %>
        <% end %>


        <%= render 'questions/answer_form'%>



      </span>
    </div>
  </div>
<% end %>